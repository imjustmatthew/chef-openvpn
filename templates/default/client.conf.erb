# OpenVPN client config file
#
# Generated by Chef

client

remote <%= @config[:remote_host] %> <%= @config[:remote_port] ? @config[:remote_port] : @config[:port] %>
proto <%= @config[:proto] %>
dev <%= @config[:dev] %>
;dev-node OpenVPN-TAP

<% if (@config[:auth][:type] == "cert_passwd") or (@config[:auth][:type] == "passwd") -%>
auth-user-pass <%= @config[:auth][:password_file] %>
;auth-nocache
<% end -%>

<% if (@config[:auth][:type] == "cert") or (@config[:auth][:type] == "cert_passwd") -%>
cert <%= @config_name %>-<%= @user_name %>.crt
key  <%= @config_name %>-<%= @user_name %>.key
<% end -%>

ca <%= @config_name %>-<%= @user_name %>-ca.crt

ns-cert-type server

resolv-retry infinite
nobind

comp-lzo

<% if @config[:user] -%>
user <%= @config[:user] %>
<% end -%>
<% if @config[:group] -%>
group <%= @config[:group] %>
<% end -%>

persist-key
persist-tun

<% if @config[:mute_replay_warnings] -%>
mute-replay-warnings
<% end -%>

<% if @config[:reneg_sec] -%>
reneg-sec <%= @config[:reneg_sec] %>
<% end -%>

verb <%= @config[:verb] || 3 %>
mute <%= @config[:mute] || 20 %>

<% if @config[:route_nopull] -%>
route_nopull
<% end -%>

<% if @config[:script_security] -%>
script-security <%= @config[:script_security] %>
<% end -%>
<% if @config[:script_up] -%>
up <%= @config[:script_up] %>
<% end -%>
<% if @config[:script_down] -%>
down <%= @config[:script_down] %>
<% end -%>
<% if @config[:script_down_pre] -%>
down-pre <%= @config[:script_down_pre] %>
<% end -%>



